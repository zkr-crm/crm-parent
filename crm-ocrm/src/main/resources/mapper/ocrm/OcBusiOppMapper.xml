<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.com.zsyk.crm.ocrm.mapper.OcBusiOppMapper" >
  <resultMap id="BaseResultMap" type="cn.com.zsyk.crm.ocrm.entity.OcBusiOpp" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="busi_opp_no" property="busiOppNo" jdbcType="VARCHAR" />
    <result column="busi_opp_name" property="busiOppName" jdbcType="VARCHAR" />
    <result column="busi_opp_type" property="busiOppType" jdbcType="VARCHAR" />
    <result column="cust_no" property="custNo" jdbcType="VARCHAR" />
    <result column="cust_nam" property="custNam" jdbcType="VARCHAR" />
    <result column="cust_tel" property="custTel" jdbcType="VARCHAR" />
    <result column="cust_type" property="custType" jdbcType="VARCHAR" />
    <result column="busi_opp_src" property="busiOppSrc" jdbcType="VARCHAR" />
    <result column="busi_opp_stage" property="busiOppStage" jdbcType="VARCHAR" />
    <result column="busi_opp_psb" property="busiOppPsb" jdbcType="VARCHAR" />
    <result column="pred_prem" property="predPrem" jdbcType="DECIMAL" />
    <result column="busi_opp_desc" property="busiOppDesc" jdbcType="VARCHAR" />
    <result column="busi_opp_create_user" property="busiOppCreateUser" jdbcType="VARCHAR" />
    <result column="busi_opp_create_date" property="busiOppCreateDate" jdbcType="TIMESTAMP" />
    <result column="assign_date" property="assignDate" jdbcType="TIMESTAMP" />
    <result column="cancel_user" property="cancelUser" jdbcType="VARCHAR" />
    <result column="cancel_date" property="cancelDate" jdbcType="DATE" />
    <result column="cancel_reason" property="cancelReason" jdbcType="VARCHAR" />
    <result column="cust_agent" property="custAgent" jdbcType="VARCHAR" />
    <result column="estimate_succ_date" property="estimateSuccDate" jdbcType="DATE" />
    <result column="close_date" property="closeDate" jdbcType="DATE" />
    <result column="first_follow_date" property="firstFollowDate" jdbcType="DATE" />
    <result column="first_follow_user" property="firstFollowUser" jdbcType="VARCHAR" />
    <result column="last_follow_date" property="lastFollowDate" jdbcType="DATE" />
    <result column="last_follow_user" property="lastFollowUser" jdbcType="VARCHAR" />
    <result column="follow_days" property="followDays" jdbcType="INTEGER" />
    <result column="follow_times" property="followTimes" jdbcType="INTEGER" />
    <result column="policy_no" property="policyNo" jdbcType="VARCHAR" />
    <result column="product_code" property="productCode" jdbcType="VARCHAR" />
    <result column="policy_prem" property="policyPrem" jdbcType="DECIMAL" />
    <result column="sign_date" property="signDate" jdbcType="DATE" />
    <result column="follow_up_busi_opp_qty" property="followUpBusiOppQty" jdbcType="VARCHAR" />
    <result column="fail_reason" property="failReason" jdbcType="VARCHAR" />
    <result column="create_user" property="createUser" jdbcType="VARCHAR" />
    <result column="create_date" property="createDate" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="VARCHAR" />
    <result column="update_user" property="updateUser" jdbcType="VARCHAR" />
    <result column="update_date" property="updateDate" jdbcType="VARCHAR" />
    <result column="update_time" property="updateTime" jdbcType="VARCHAR" />
    <result column="time_stamp" property="timeStamp" jdbcType="TIMESTAMP" />
    <result column="rec_stat" property="recStat" jdbcType="VARCHAR" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from oc_busi_opp
    where busi_opp_no = #{busiOppNo,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="cn.com.zsyk.crm.ocrm.entity.OcBusiOpp" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into oc_busi_opp (busi_opp_no, busi_opp_name, busi_opp_type, 
      cust_no, cust_nam,cust_tel,cust_type, busi_opp_src, 
      busi_opp_stage, busi_opp_psb, pred_prem, 
      busi_opp_desc, busi_opp_create_user, busi_opp_create_date, 
      assign_date, cancel_user, cancel_date, 
      cancel_reason, cust_agent, estimate_succ_date, 
      close_date, first_follow_date, first_follow_user, 
      last_follow_date, last_follow_user, follow_days, 
      follow_times, policy_no, product_code, 
      policy_prem, sign_date, fail_reason, 
      create_user, create_date, create_time, 
      update_user, update_date, update_time, 
      time_stamp, rec_stat)
    values (#{busiOppNo,jdbcType=VARCHAR}, #{busiOppName,jdbcType=VARCHAR}, #{busiOppType,jdbcType=VARCHAR}, 
      #{custNo,jdbcType=VARCHAR}, #{custNam,jdbcType=VARCHAR},#{custTel,jdbcType=VARCHAR}, #{custType,jdbcType=VARCHAR}, #{busiOppSrc,jdbcType=VARCHAR}, 
      #{busiOppStage,jdbcType=VARCHAR}, #{busiOppPsb,jdbcType=VARCHAR}, #{predPrem,jdbcType=DECIMAL}, 
      #{busiOppDesc,jdbcType=VARCHAR}, #{busiOppCreateUser,jdbcType=VARCHAR}, #{busiOppCreateDate,jdbcType=TIMESTAMP}, 
      #{assignDate,jdbcType=TIMESTAMP}, #{cancelUser,jdbcType=VARCHAR}, #{cancelDate,jdbcType=DATE}, 
      #{cancelReason,jdbcType=VARCHAR}, #{custAgent,jdbcType=VARCHAR}, #{estimateSuccDate,jdbcType=DATE}, 
      #{closeDate,jdbcType=DATE}, #{firstFollowDate,jdbcType=DATE}, #{firstFollowUser,jdbcType=VARCHAR}, 
      #{lastFollowDate,jdbcType=DATE}, #{lastFollowUser,jdbcType=VARCHAR}, #{followDays,jdbcType=INTEGER}, 
      #{followTimes,jdbcType=INTEGER}, #{policyNo,jdbcType=VARCHAR}, #{productCode,jdbcType=VARCHAR}, 
      #{policyPrem,jdbcType=DECIMAL}, #{signDate,jdbcType=DATE}, #{failReason,jdbcType=VARCHAR}, 
      #{createUser,jdbcType=VARCHAR}, #{createDate,jdbcType=VARCHAR}, #{createTime,jdbcType=VARCHAR}, 
      #{updateUser,jdbcType=VARCHAR}, #{updateDate,jdbcType=VARCHAR}, #{updateTime,jdbcType=VARCHAR}, 
      #{timeStamp,jdbcType=TIMESTAMP}, #{recStat,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="cn.com.zsyk.crm.ocrm.entity.OcBusiOpp" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update oc_busi_opp
    set busi_opp_name = #{busiOppName,jdbcType=VARCHAR},
      busi_opp_type = #{busiOppType,jdbcType=VARCHAR},
      cust_no = #{custNo,jdbcType=VARCHAR},
      cust_nam = #{custNam,jdbcType=VARCHAR},
      cust_tel = #{custTel,jdbcType=VARCHAR},
      cust_type = #{custType,jdbcType=VARCHAR},
      busi_opp_src = #{busiOppSrc,jdbcType=VARCHAR},
      busi_opp_stage = #{busiOppStage,jdbcType=VARCHAR},
      busi_opp_psb = #{busiOppPsb,jdbcType=VARCHAR},
      pred_prem = #{predPrem,jdbcType=DECIMAL},
      busi_opp_desc = #{busiOppDesc,jdbcType=VARCHAR},
      busi_opp_create_user = #{busiOppCreateUser,jdbcType=VARCHAR},
      busi_opp_create_date = #{busiOppCreateDate,jdbcType=TIMESTAMP},
      assign_date = #{assignDate,jdbcType=TIMESTAMP},
      cancel_user = #{cancelUser,jdbcType=VARCHAR},
      cancel_date = #{cancelDate,jdbcType=DATE},
      cancel_reason = #{cancelReason,jdbcType=VARCHAR},
      cust_agent = #{custAgent,jdbcType=VARCHAR},
      estimate_succ_date = #{estimateSuccDate,jdbcType=DATE},
      close_date = #{closeDate,jdbcType=DATE},
      first_follow_date = #{firstFollowDate,jdbcType=DATE},
      first_follow_user = #{firstFollowUser,jdbcType=VARCHAR},
      last_follow_date = #{lastFollowDate,jdbcType=DATE},
      last_follow_user = #{lastFollowUser,jdbcType=VARCHAR},
      follow_days = #{followDays,jdbcType=INTEGER},
      follow_times = #{followTimes,jdbcType=INTEGER},
      policy_no = #{policyNo,jdbcType=VARCHAR},
      product_code = #{productCode,jdbcType=VARCHAR},
      policy_prem = #{policyPrem,jdbcType=DECIMAL},
      sign_date = #{signDate,jdbcType=DATE},
      fail_reason = #{failReason,jdbcType=VARCHAR},
      create_user = #{createUser,jdbcType=VARCHAR},
      create_date = #{createDate,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=VARCHAR},
      update_user = #{updateUser,jdbcType=VARCHAR},
      update_date = #{updateDate,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=VARCHAR},
      time_stamp = #{timeStamp,jdbcType=TIMESTAMP},
      rec_stat = #{recStat,jdbcType=VARCHAR}
    where busi_opp_no = #{busiOppNo,jdbcType=VARCHAR}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select busi_opp_no, busi_opp_name, busi_opp_type, cust_no, cust_nam,cust_tel,cust_type, busi_opp_src, 
	    busi_opp_stage, busi_opp_psb, pred_prem, busi_opp_desc, busi_opp_create_user, busi_opp_create_date, 
	    assign_date, cancel_user, cancel_date, cancel_reason, cust_agent, estimate_succ_date, 
	    close_date, first_follow_date, first_follow_user, last_follow_date, last_follow_user, 
	    follow_days, follow_times, policy_no, product_code, policy_prem, sign_date, fail_reason, 
	    create_user, create_date, create_time, update_user, update_date, update_time, time_stamp, 
	    rec_stat
    from oc_busi_opp
    where busi_opp_no = #{busiOppNo,jdbcType=VARCHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    select busi_opp_no, busi_opp_name, busi_opp_type, cust_no, cust_nam,cust_tel,cust_type, busi_opp_src, 
	    busi_opp_stage, busi_opp_psb, pred_prem, busi_opp_desc, busi_opp_create_user, busi_opp_create_date, 
	    assign_date, cancel_user, cancel_date, cancel_reason, cust_agent, estimate_succ_date, 
	    close_date, first_follow_date, first_follow_user, last_follow_date, last_follow_user, 
	    follow_days, follow_times, policy_no, product_code, policy_prem, sign_date, fail_reason, 
	    create_user, create_date, create_time, update_user, update_date, update_time, time_stamp, 
	    rec_stat
    from oc_busi_opp
  </select>
  <select id="selectBusiOppList" parameterType="cn.com.zsyk.crm.ocrm.entity.OcBusiOpp" resultMap="BaseResultMap" >
    select busi_opp_no, busi_opp_name, busi_opp_type, cust_no, cust_nam,cust_tel,cust_type, busi_opp_src, 
	    busi_opp_stage, busi_opp_psb, pred_prem, busi_opp_desc, busi_opp_create_user, busi_opp_create_date, 
	    assign_date, cancel_user, cancel_date, cancel_reason, cust_agent, estimate_succ_date, 
	    close_date, first_follow_date, first_follow_user, last_follow_date, last_follow_user, 
	    follow_days, follow_times, policy_no, product_code, policy_prem, sign_date, fail_reason, 
	    create_user, create_date, create_time, update_user, update_date, update_time, time_stamp, 
	    rec_stat
    from oc_busi_opp
    where 1=1
			<if test="custNo != null and custNo !=''">
				and cust_no = #{custNo,jdbcType=VARCHAR}
			</if>
			<if test="busiOppName != null and busiOppName !=''">
				and busi_opp_name like concat('%', #{busiOppName,jdbcType=VARCHAR}, '%') 
			</if>
			<if test="custAgent != null and custAgent !=''">
				and cust_agent = #{custAgent,jdbcType=VARCHAR}
			</if>
			<if test="busiOppStage != null and busiOppStage !=''">
				and busi_opp_stage = #{busiOppStage,jdbcType=VARCHAR}
			</if>
			<if test="collaborator != null and collaborator !=''">
			</if>

  </select>
    <select id="selectGrpFollowUpByCustAgen" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
		  SELECT cust_agent,COUNT(1) as follow_up_busi_opp_qty from oc_busi_opp
		where busi_opp_stage = '03'
		GROUP BY cust_agent
  </select>
  
  
  
  
  

</mapper>