<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.zsyk.crm.ecif.mapper.EcContactAddrMapper">
  <resultMap id="BaseResultMap" type="cn.com.zsyk.crm.ecif.entity.EcContactAddr">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="cust_no" jdbcType="VARCHAR" property="custNo" />
    <id column="addr_typ" jdbcType="VARCHAR" property="addrTyp" />
    <result column="country_cd" jdbcType="VARCHAR" property="countryCd" />
    <result column="prov_cd" jdbcType="VARCHAR" property="provCd" />
    <result column="city_cd" jdbcType="VARCHAR" property="cityCd" />
    <result column="county_cd" jdbcType="VARCHAR" property="countyCd" />
    <result column="street_addr" jdbcType="VARCHAR" property="streetAddr" />
    <result column="postcode" jdbcType="VARCHAR" property="postcode" />
    <result column="det_addr" jdbcType="VARCHAR" property="detAddr" />
    <result column="wht_default_addr" jdbcType="VARCHAR" property="whtDefaultAddr" />
    <result column="create_date" jdbcType="VARCHAR" property="createDate" />
    <result column="create_time" jdbcType="VARCHAR" property="createTime" />
    <result column="create_user" jdbcType="VARCHAR" property="createUser" />
    <result column="update_date" jdbcType="VARCHAR" property="updateDate" />
    <result column="update_time" jdbcType="VARCHAR" property="updateTime" />
    <result column="update_user" jdbcType="VARCHAR" property="updateUser" />
    <result column="time_stamp" jdbcType="TIMESTAMP" property="timeStamp" />
    <result column="rec_stat" jdbcType="VARCHAR" property="recStat" />
    <result column="cust_source" jdbcType="VARCHAR" property="custSource" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR}
      and addr_typ = #{addrTyp,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="cn.com.zsyk.crm.ecif.entity.EcContactAddr">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ec_contact_addr (cust_no, addr_typ, country_cd, 
      prov_cd, city_cd, county_cd, 
      street_addr, postcode, det_addr, 
      wht_default_addr, create_date, create_time, 
      create_user, update_date, update_time, 
      update_user, time_stamp, rec_stat,cust_source
      )
    values (#{custNo,jdbcType=VARCHAR}, #{addrTyp,jdbcType=VARCHAR}, #{countryCd,jdbcType=VARCHAR}, 
      #{provCd,jdbcType=VARCHAR}, #{cityCd,jdbcType=VARCHAR}, #{countyCd,jdbcType=VARCHAR}, 
      #{streetAddr,jdbcType=VARCHAR}, #{postcode,jdbcType=VARCHAR}, #{detAddr,jdbcType=VARCHAR}, 
      #{whtDefaultAddr,jdbcType=VARCHAR}, #{createDate,jdbcType=VARCHAR}, #{createTime,jdbcType=VARCHAR}, 
      #{createUser,jdbcType=VARCHAR}, #{updateDate,jdbcType=VARCHAR}, #{updateTime,jdbcType=VARCHAR}, 
      #{updateUser,jdbcType=VARCHAR}, #{timeStamp,jdbcType=TIMESTAMP}, #{recStat,jdbcType=VARCHAR},
      #{custSource,jdbcType=VARCHAR}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="cn.com.zsyk.crm.ecif.entity.EcContactAddr">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ec_contact_addr
    set country_cd = #{countryCd,jdbcType=VARCHAR},
      prov_cd = #{provCd,jdbcType=VARCHAR},
      city_cd = #{cityCd,jdbcType=VARCHAR},
      county_cd = #{countyCd,jdbcType=VARCHAR},
      street_addr = #{streetAddr,jdbcType=VARCHAR},
      postcode = #{postcode,jdbcType=VARCHAR},
      det_addr = #{detAddr,jdbcType=VARCHAR},
      wht_default_addr = #{whtDefaultAddr,jdbcType=VARCHAR},
      create_date = #{createDate,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=VARCHAR},
      create_user = #{createUser,jdbcType=VARCHAR},
      update_date = #{updateDate,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=VARCHAR},
      update_user = #{updateUser,jdbcType=VARCHAR},
      time_stamp = #{timeStamp,jdbcType=TIMESTAMP},
      rec_stat = #{recStat,jdbcType=VARCHAR},
      cust_source = #{custSource,jdbcType=VARCHAR}
    where cust_no = #{custNo,jdbcType=VARCHAR}
      and addr_typ = #{addrTyp,jdbcType=VARCHAR}
  </update>
  <update id="updateByCustNo" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ec_contact_addr
    set update_date = #{updateDate,jdbcType=VARCHAR},
    update_time = #{updateTime,jdbcType=VARCHAR},
    update_user = #{updateUser,jdbcType=VARCHAR},
    rec_stat = #{recStat,jdbcType=VARCHAR}
    where cust_no = #{custNo,jdbcType=VARCHAR}
  </update>
  <select id="selectByPrimaryKey" parameterType="map" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select cust_no, addr_typ, country_cd, prov_cd, city_cd, county_cd, street_addr, postcode, 
    det_addr, wht_default_addr, create_date, create_time, create_user, update_date, update_time, 
    update_user, time_stamp, rec_stat,cust_source
    from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR}
      and addr_typ = #{addrTyp,jdbcType=VARCHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select cust_no, addr_typ, country_cd, prov_cd, city_cd, county_cd, street_addr, postcode, 
    det_addr, wht_default_addr, create_date, create_time, create_user, update_date, update_time, 
    update_user, time_stamp, rec_stat,cust_source
    from ec_contact_addr
  </select>
  <select id="selectContactAddrList" parameterType="cn.com.zsyk.crm.ecif.entity.EcContactAddr" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select cust_no, addr_typ, country_cd, prov_cd, city_cd, county_cd, street_addr, postcode, 
	    det_addr, wht_default_addr, create_date, create_time, create_user, update_date, update_time, update_user, 
	    time_stamp, rec_stat,cust_source
    from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR}
			<if test="addrTyp != null and addrTyp !=''">
				and addr_typ like concat('%', #{addrTyp,jdbcType=VARCHAR}, '%') 
			</if>
  </select>
  <select id="selectMainContactAddr" parameterType="map" resultMap="BaseResultMap">
    select cust_no, addr_typ, country_cd, prov_cd, city_cd, county_cd, street_addr, postcode, 
	    det_addr, wht_default_addr, create_date, create_time, create_user, update_date, update_time, update_user, 
	    time_stamp, rec_stat,cust_source
    from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR} and rec_stat = '0'
    and addr_typ = (select MIN(b.addr_typ) from ec_contact_addr b where b.cust_no = #{custNo,jdbcType=VARCHAR})
  </select>
  <delete id="deleteByCustNo"  parameterType="java.lang.String">
    delete from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR}
  </delete>
  <select id="getNextSqnByCustNo" parameterType="java.lang.String" resultType="java.lang.String">
    select nvl(max(addr_typ)+1,1) from ec_contact_addr where cust_no = #{custNo,jdbcType=VARCHAR}
  </select>
  <select id="selectByPrimaryKeyList" parameterType="map" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select cust_no, addr_typ, country_cd, prov_cd, city_cd, county_cd, street_addr, postcode,
    det_addr, wht_default_addr, create_date, create_time, create_user, update_date, update_time,
    update_user, time_stamp, rec_stat,cust_source
    from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR}
  </select>

  <select id="selectContactAddrByPkList" parameterType="map" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select cust_no, addr_typ, country_cd, prov_cd, city_cd, county_cd, street_addr, postcode,
    det_addr, wht_default_addr, create_date, create_time, create_user, update_date, update_time,
    update_user, time_stamp, rec_stat,cust_source
    from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR}
    order by cust_source desc ,time_stamp desc
  </select>
  <select id="selectCount" parameterType="java.lang.String" resultMap="BaseResultMap">
    select cust_no, addr_typ, country_cd, prov_cd, city_cd, county_cd, street_addr, postcode,
	    det_addr, wht_default_addr, create_date, create_time, create_user, update_date, update_time, update_user,
	    time_stamp, rec_stat,cust_source
    from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR}
    and addr_typ=1
      <!--
      and rec_stat = '0'
      主键为客户号和客户地址类型，所以提取客户信息时，无论是否有效均应该查出，
      -->
  </select>

  <select id="selectCustNo"  parameterType="java.lang.String" resultType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select cust_no
    from ec_contact_addr
    where cust_no = #{custNo,jdbcType=VARCHAR}
  </select>
</mapper>